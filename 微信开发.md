

## 资料地址

公共平台开发者文档 https://mp.weixin.qq.com/wiki/10/e5f772f4521da17fa0d7304f68b97d7e.html
使用本地服务器 https://www.zhihu.com/question/25456655
开发说明 http://mp.weixin.qq.com/wiki/home/index.html

QQ浏览器内置了微信开发插件，功能很全，包括：远程调试微信内网页 (安卓) ，公众号本地开发和调试，地址：http://blog.qqbrowser.cc/。

## 对公众平台开发的理解

微信提供了公众号(订阅号与服务号的统称)，和企业号。

个人不能开通服务号和企业号。

服务号、订阅号、企业号的介绍（区别）
1、订阅号：主要偏于为用户传达资讯（类似报纸杂志），认证前后都是每天只可以群发一条消息；
2、服务号：主要偏于服务交互（类似银行，114，提供服务查询），认证前后都是每个月可群发4条消息；
3、企业号：主要用于公司内部通讯使用，需要先有成员的通讯信息验证才可以关注成功企业号；
温馨提示：
1、如果想简单的发送消息，达到宣传效果，建议可选择订阅号；
2、如果想进行商品销售，进行商品售卖，建议可申请服务号；
3、如果想用来管理内部企业员工、团队，对内使用，可申请企业号。

## 第三方平台

服务号如果需要调用[第三方接口](https://mp.weixin.qq.com/cgi-bin/frame?t=advanced/dev_tools_frame&nav=10049&token=374858174&lang=zh_CN)，运营者可通过授权接口和功能权限给第三方平台开发者 (例如服务号的商品售卖) 。

要进行第三方平台的开发，需要在[微信开放平台 ](https://open.weixin.qq.com/cgi-bin/frame?t=home/wx_plugin_tmpl&lang=zh_CN) (不是公众平台) 认证，只允许企业或机构认证，个人不能认证，认证费用 300元/年。

是公众号授权给第三方。

## 公众号开发步骤

### 概念

**微信公众平台开发** 是指为微信公众号进行业务开发。

要为移动应用、PC端网站、公众号第三方平台（为各行各业公众号运营者提供服务，服务号可以为这些第三方平台提供授权）的开发，请前往微信开放平台接入。

### 开始开发

#### 1.申请公众号
去公众平台[申请公众号](https://mp.weixin.qq.com/cgi-bin/readtemplate?t=register/step1_tmpl&lang=zh_CN) (每个邮箱仅能申请一种帐号：公众号或企业号)
这里有对不同类型的公众号进行说明：http://kf.qq.com/faq/120911VrYVrA130805byM32u.html

如果是订阅号，后面要做的只需要认证 (不支持个人类型的订阅号认证) 。

 在服务号申请下来之前，可以快速申请一个[测试号](http://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&t=sandbox/index)进行接口测试开发。

> 1、微信公众平台开发是指为微信公众号进行业务开发，为移动应用、PC端网站、公众号第三方平台（为各行各业公众号运营者提供服务）的开发，请前往微信开放平台接入。
> 2、在申请到认证公众号之前，你可以先通过测试号申请系统，快速申请一个接口测试号，立即开始接口测试开发。
> 3、在开发过程中，可以使用接口调试工具来在线调试某些接口。
> 4、每个接口都有每日接口调用频次限制，可以在公众平台官网-开发者中心处查看具体频次。
> 5、在开发出现问题时，可以通过接口调用的返回码，以及报警排查指引（在公众平台官网-开发者中心处可以设置接口报警），来发现和解决问题。
> 6、公众平台以access_token为接口调用凭据，来调用接口，所有接口的调用需要先获取access_token，access_token在2小时内有效，过期需要重新获取，但1天内获取次数有限，开发者需自行存储，详见获取接口调用凭据（access_token）文档。
> 7、公众平台接口调用仅支持80端口。

#### 2.接入服务器

申请测试号后首先要接入服务器，这里是[接入指南](http://mp.weixin.qq.com/wiki/17/2d4265491f12608cd170a95559800f2d.html)。
接入需要一台服务器，但可以通过一些服务实现接入本地服务器，例如：http://www.ngrok.cc/。

在域名列表添加一个系统分配前缀 yangos，然后启动 ngrok，获得域名 https://yangos.ngrok.cc，这里是终端内的转发信息

```
Forwarding                    https://yangos.ngrok.cc -> 127.0.0.1:80           
Forwarding                    http://yangos.ngrok.cc -> 127.0.0.1:80  
```

接下来在微信接入地址填写 URL 和 TOKEN (TOKEN 随便填，用于生成算法)。 然后在本地 80 端口搭建一个服务用作响应微信认证，服务会接收到什么信息和应该返回什么内容，见[接入指南](接下来在微信接入地址填写 URL 和 TOKEN (TOKEN 随便填，用于生成算法)。

然后在本地 33532 端口搭建一个服务用作响应微信认证。服务器会接收到什么信息和应该返回什么内容，见 http://mp.weixin.qq.com/wiki/17/2d4265491f12608cd170a95559800f2d.html) 的第二步。

注意，微信验证服务器只接受 80 端口，所以需要进行端口映射,这里是 `ngork` 端口映射的配置

```
proto:
 http: 33542
 https: 33542

//重新运行 ngork。
//Forwarding                    http://yangos.ngrok.cc -> 127.0.0.1:33542         
//Forwarding                    https://yangos.ngrok.cc -> 127.0.0.1:33542

```

#### 3.获取 access_token

access_token 是公众号全局唯一凭据，公众号调用各接口时都要用到。[这里是](http://mp.weixin.qq.com/wiki/14/9f9c82c1af308e3b14ba9b973f99a8ba.html) access_token 的详细说明。

#### 4. 修改菜单

首先创建公众号的菜单，有很多种类型的菜单，对应不同的操作：

click 类型：点击响应，微信服务器发送带有开发者自定义的 key 的 event  (参考消息接口指南) 给开发者，开发者通过该 key 与用户交互。

view 类型：跳转 url，在微信客户端打开按钮中填写的 url 地址。可与网页授权获取用户基本信息接口结合，获得用户基本信息。

scancode_push：扫码并推送 evnet，点击后微信客户端调用扫一扫工具并显示结果 (如果是 url 会跳转至 url) ，并将扫码结果传给开发者，开发者可以下发消息。

scancode_waitmsg：扫码推事件并弹出消息接收中对话框。

# 其他资料

微信第三方网站的账户想与用户的openid绑定，应该如何获取？

http://www.jianshu.com/p/3ffe02dbcc73
